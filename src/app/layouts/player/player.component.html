<div class="xm-player-box" (moveEnd)="moveEnd($event)" (mouseenter)="onMouseenter()" appDrag>
  <div class="xm-player" #player>
    <div class="thumbnail">
      <img appDragHandler [src]="album?.cover || 'assets/images/default-pic.jpg'" />
    </div>
    <div class="middle">
      <div class="operate">
        <i class="icon icon-prev" appIcon="previous" (click)="prev(currentTrackIndex - 1)"></i>
        <i class="icon icon-toggle" (click)="togglePlay()" [appIcon]="playing ? 'pause' : 'play'"></i>
        <i class="icon icon-next" appIcon="next" (click)="next(currentTrackIndex + 1)"></i>
      </div>
    </div>
    <div class="list" (click)="togglePanel(!showPanel)">
      <i class="icon" appIcon="mulu"></i>
    </div>
    <div class="close" (click)="close.emit()">
      <i class="icon" appIcon="Close" ></i>
    </div>
  </div>
  <div class="xm-player-panel" @menuAni [class.down]="isDown" *ngIf="trackList.length && showPanel">
    <div class="panel-wrap">
      <ul>
        <li
          [class.current]="item.trackId === currentTrack?.trackId"
          *ngFor="let item of trackList; index as i;trackBy: trackByTracks">
          <p (click)="changePlay(i)" class="title ellipsis" [title]="item.title">{{ item.title }}</p>
          <i (click)="delPanel(i)" class="icon" appIcon="delete"></i>
        </li>
      </ul>
    </div>
  </div>
</div>

<audio
  #audio
  [src]="currentTrack?.src"
  (canplay)="canplay()"
  (ended)="ended()"
  (error)="error()">
</audio>
